
# VSCode Intellisense For Your Mbed Projects

`mbed-vscode-tools` is made for software engineers who want to develop their mbed projects in vscode instead of mbed studio.
The tool offers a commandline interface to generate and update your c_cpp_properties.json for correct vscode intellisense.

## Notes

* This tool works in conjunction with the official cli tool (`mbed-tools`) provided by the mbed team.
* We assume that the users know how to use mbed-tools and its workflow. Otherwise see [the official docs](https://os.mbed.com/docs/mbed-os/v6.15/build-tools/use.html). 

## Dependencies

Python interpreter:

* python >= 3.6.0 (f strings are used in the source)

Python packages:

* click >= 8.0.0

Other softwares:

* mbed-tools >= 7.0.0
* arm-none-eabi-gcc >= 9.0.0 or armcc >= 6.0.0
* cmake >= 3.19.0
* ninja >= 1.0.0

## Installation

```bash
$ pip install mbed-vscode-tools
```

Run `$ pip uninstall mbed-vscode-tools` to uninstall mbed-vscode-tools.

## Quick Start

### Create c_cpp_properties.json

The 1st step to do is generating a template of your c_cpp_properties.json by running `generate` command in your mbed program directory root as below:

```bash
# In <your-mbed-program-directory-root>
$ mbed-vscode-tools generate .vscode/
```

Output:

```json
// .vscode/c_cpp_properties.json
{
    "env": {},
    "configurations": [
        {
            // "MbedAuto" entry is to be autocompleted by "configure" or "update" commands.
            // Do not edit this entry yourself.
            "name": "MbedAuto",
            "includePath": [],
            "defines": [],
            "cStandard": "c17",
            "cppStandard": "c++17",
            "intelliSenseMode": "gcc-arm"
        },
        {
            // "Mbed" entry will be inherited by "MbedAuto".
            // Customize here as you like.
            // Basically you don't have to customize as long as 
            "name": "Mbed",
            "includePath": [],
            "defines": [],
            "cStandard": "c17",
            "cppStandard": "c++17",
            "intelliSenseMode": "gcc-arm"
        }
    ],
    "version": 4
}
```

You can see that two config entries \"MbedAuto\" and \"Mbed\" are created. 

* `MbedAuto`  
  The \"MbedAuto\" entry, which will be automatically updated by `update` command, is for your vscode intellisense.
  Do not edit this entry yourself
* `Mbed`

## Usage

The mbed-vscode-tools offers following three commands: `configure`, `generate`, and `update`.

See the documantion below for details of each command.

### `configure`

Configure the build settings.

```
$ mbed-vscode-tools configure MBED_TOOLCHAIN MBED_TARGET VSCODE_CONF_FILE [--mbed-profile [debug|develop|release]] [--mbed-program-dir directory] [--help]
```

**Positional Arguments**

* `MBED_TOOL_CHAIN`  
  Select \"GCC_ARM\" or "ARM". Set \"GCC_ARM\" if you use the gnu arm embedded toolchain (arm-none-eabi-gcc). Set \"ARM\" if you use the arm compiler (armcc). Note that armcc is a paid compiler.
* `MBED_TARGET`  
  Set a target mbed-enabled board identifier.
  You can find it by `$ mbed-tools detect` command.
* `VSCODE_CONF_FILE`  
  Path to your c_cpp_properties.json.
  The file must have \"Mbed\" configuration entry,
  which will be inherited by \"MbedAuto\" entry
  automatically generated by this tool.
  You can generate a template of your c_cpp_properties.json
  by `generate` command for quick start.

**Options**

* `--mbed-profile`  
  Select a build profile from \"debug\", \"develop\", and \"release\". See [here](https://os.mbed.com/docs/mbed-os/v6.15/program-setup/build-profiles-and-rules.html) for the specification of each profile. [default: develop]
* `--mbed-program-dir`  
  Path to an mbed program directory. [default: current working directory]

### `generate`

Generate a template of your c_cpp_properties.json for quick start.

```
$ mbed-vscode-tools generate OUT_DIR [--c-standard [c17|c11|c99|c89]] [--cpp-standard [c++20|c++17|c++14|c++11|c++03|c++98]]
```

**Positional Arguments**

* `OUT_DIR`  
  The output directory where a template of your
  c_cpp_properties.json will be generated. If the specified directory doesn't
  exist, it'll be created including sub-directories involved.

**Options**

* `--c-standard`  
  The version of C language standard for vscode intellisense. [default: c17]
* `--cpp-standard`  
  The version of C++ language standard for vscode intellisense. [default: c++17]

### `update`

Update your c_cpp_properties.json.

```
$ mbed-vscode-tools update [--tool-conf-file]
```

**Positional Arguments**

No positional arguments.

**Options**

* `--tool-conf-file`  
  Path to the tool config file (.mbed-vscode-tools.json) generated by `configure` command. [default: ./.mbed-vscode-tools.json]
